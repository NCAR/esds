
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Creating Model Documentation Using Jupyterbook and Intake-esm &#8212; ESDS  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../_static/documentation_options.js?v=187304be"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=30646c52"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'posts/2021/model_documentation_jupyterbook';</script>
    <link rel="author" title="About these documents" href="../../../about/" />
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />

<link
  rel="alternate"
  type="application/atom+xml"
  href="../../../blog/atom.xml"
  title="ESDS"
/>



  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search/"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/esds_logo.png" class="logo__image only-light" alt="ESDS  documentation - Home"/>
    <img src="../../../_static/esds_logo.png" class="logo__image only-dark pst-js-only" alt="ESDS  documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../about/">
    About Us
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../blog/">
    Blog
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../communication/">
    Communication and Meetings
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../office-hours/">
    Office Hours
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../resources/">
    Resources
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
      
        <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ncar/esds" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/@ncar_ucar_esds" title="YouTube" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../about/">
    About Us
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../blog/">
    Blog
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../communication/">
    Communication and Meetings
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../office-hours/">
    Office Hours
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../resources/">
    Resources
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ncar/esds" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/@ncar_ucar_esds" title="YouTube" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

<div class="ablog-sidebar-item ablog__postcard">


<h2>
  
  
  <i class="fa fa-calendar"></i>
  
  <span>25 June 2021</span>
  
</h2>
<ul>
  <div class="ablog-sidebar-item ablog__postcard2">


<li id="ablog-sidebar-item author ablog__author">
  <span>
    
    <i class="fa-fw fa fa-user"></i>
    
    </span>
  
  
  <a href="../../../blog/author/max-grover/">Max Grover</a>
  
  
  
</li>





<li id="ablog-sidebar-item tags ablog__tags">
  <span>
    
    
    <i class="fa-fw fa fa-tags"></i>
    
    
    </span>
  
  
  <a href="../../../blog/tag/jupyter/">jupyter</a>
  
  
  
  
  
  <a href="../../../blog/tag/cesm/">cesm</a>
  
  
  
  
  
  <a href="../../../blog/tag/intake/">intake</a>
  
  
  
  
  
  <a href="../../../blog/tag/documentation/">documentation</a>
  
  
  
</li>


</div>
</ul>
</div>
</div>
        <div class="sidebar-primary-item">

<div class="ablog-sidebar-item ablog__recentposts">
<h3>
  <a href="../../../blog/">Recent Posts</a>
</h3>
<ul>
  
  
  <li>
    <a href="../../2024/automation-github-workshop/">
      28 June - Workshop - From Jupyter Notebook to Web Server: Automating Container Deployments with GitHub Actions
    </a>
  </li>
  
  <li>
    <a href="../../2024/containerize-visualizations-event/">
      07 May - Workshop - From Jupyter Notebook to Web Server: Containerizing Interactive Visualizations
    </a>
  </li>
  
  <li>
    <a href="../../2024/esds-annual-event-recap/">
      01 March - 2024 ESDS Annual Event Recap
    </a>
  </li>
  
  <li>
    <a href="../../2023/esds-annual-event/">
      21 November - 2024 Earth System Data Science (ESDS) Annual Event
    </a>
  </li>
  
  <li>
    <a href="../../2023/scipy23/">
      28 August - ESDS at SciPy 2023
    </a>
  </li>
  
</ul>
</div>
</div>
        <div class="sidebar-primary-item">

<div class="ablog-sidebar-item ablog__archive">
<h3>
  <a href="../../../blog/archive/">Archives</a>
</h3>
<ul>
  
  
  <li>
    <a href="../../../blog/2024/">2024 (3)</a>
  </li>
  
  
  
  <li>
    <a href="../../../blog/2023/">2023 (8)</a>
  </li>
  
  
  
  <li>
    <a href="../../../blog/2022/">2022 (13)</a>
  </li>
  
  
  
  <li>
    <a href="../../../blog/2021/">2021 (52)</a>
  </li>
  
  
  
  <li>
    <a href="../../../blog/2020/">2020 (6)</a>
  </li>
  
  
  
  <li>
    <a href="../../../blog/2019/">2019 (2)</a>
  </li>
  
  
</ul>
</div>
</div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Creating Model Documentation Using Jupyterbook and Intake-esm</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
<section class="tex2jax_ignore mathjax_ignore" id="creating-model-documentation-using-jupyterbook-and-intake-esm">
<h1>Creating Model Documentation Using Jupyterbook and Intake-esm<a class="headerlink" href="#creating-model-documentation-using-jupyterbook-and-intake-esm" title="Link to this heading">#</a></h1>
<p>A common step to any project is documenting your data and your data workflow. Fortunately, open tools in the scientific python ecosystem make that much easier! In this example, we will cover creating your github repo, creating the catalog, visualizing the catalog, and generating a static webpage you can share with collaborators!</p>
<section id="fair-warning">
<h2>Fair Warning<a class="headerlink" href="#fair-warning" title="Link to this heading">#</a></h2>
<p>This week’s post is quite detailed, so just a warning! If you would like to look at the finished product, check out the following</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/mgrover1/cesm-test-data">Github repository with the content built here</a></p></li>
<li><p><a class="reference external" href="https://mgrover1.github.io/cesm-test-data/">Finished website with content</a></p></li>
</ul>
<p>By the end of this post, we will cover how to build a webpage that looks like this
<img alt="CESM book page" src="../../../_images/cesm_book_page.png" /></p>
</section>
<section id="create-your-github-repository">
<h2>Create your Github Repository<a class="headerlink" href="#create-your-github-repository" title="Link to this heading">#</a></h2>
<p>Go to <a class="reference external" href="https://github.com/">Github</a> and select “New” in the top lefthand corner next to “Repositories” - this will pull up the following window. Once you are here, go ahead and name your repository!</p>
<p>Be sure to add:</p>
<ul class="simple">
<li><p>Repository name</p></li>
<li><p>Description</p></li>
<li><p>README</p></li>
<li><p>Gitignore (use the python template)</p></li>
<li><p>Choose a license</p></li>
</ul>
<p><img alt="screen_grab" src="../../../_images/github_screen_grab.png" /></p>
</section>
<section id="clone-your-repository">
<h2>Clone your Repository<a class="headerlink" href="#clone-your-repository" title="Link to this heading">#</a></h2>
<p>At this point, you can go ahead and clone your repository! You can either clone to your local machine, or to some Jupyterhub (such as the <a class="reference external" href="https://jupyterhub.ucar.edu">NCAR Jupyterhub</a>), which will do in this case.</p>
<section id="copy-the-link-from-github">
<h3>Copy the link from Github<a class="headerlink" href="#copy-the-link-from-github" title="Link to this heading">#</a></h3>
<p>Copy the link from Github by clicking on the green “Code” button
<img alt="Github Clone Link" src="../../../_images/github_clone_link.png" /></p>
</section>
<section id="clone-to-your-machine">
<h3>Clone to your machine!<a class="headerlink" href="#clone-to-your-machine" title="Link to this heading">#</a></h3>
<p>We want to clone to the repository within the <a class="reference external" href="https://jupyterhub.ucar.edu">Jupyterhub</a>, so once logging on, we open a terminal and paste the link using the following syntax</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/mgrover1/cesm-test-data.git
</pre></div>
</div>
</section>
</section>
<section id="create-a-docs-directory">
<h2>Create a docs directory<a class="headerlink" href="#create-a-docs-directory" title="Link to this heading">#</a></h2>
<p>Now that you cloned the repository, move into it and create a <code class="docutils literal notranslate"><span class="pre">docs</span></code> directory using the following</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>cesm-test-data
mkdir<span class="w"> </span>docs
</pre></div>
</div>
</section>
<section id="build-your-catalog">
<h2>Build your Catalog<a class="headerlink" href="#build-your-catalog" title="Link to this heading">#</a></h2>
<p>Open a new Jupyter Notebook called <code class="docutils literal notranslate"><span class="pre">model_documentation.ipynb</span></code> within the <code class="docutils literal notranslate"><span class="pre">docs</span></code> directory and select a development environment which includes the following:</p>
<ul class="simple">
<li><p>jupyter-book</p></li>
<li><p>ecgtools</p></li>
</ul>
<p>If you haven’t installed these yet, you can use conda and pip (ecgtools is not yet on conda-forge)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>jupyter-book<span class="w"> </span>intake-esm<span class="w"> </span>graphviz
pip<span class="w"> </span>install<span class="w"> </span>ecgtools
</pre></div>
</div>
<p>In this case, follow the instructions in the <a class="reference external" href="https://ncar.github.io/esds/posts/ecgtools-history-files-example/">Building an Intake-esm catalog from CESM2 History Files</a> post provides the instructions for building the data catalog</p>
</section>
<section id="read-the-catalog-and-visualize-the-components-and-frequency">
<h2>Read the Catalog and Visualize the Components and Frequency<a class="headerlink" href="#read-the-catalog-and-visualize-the-components-and-frequency" title="Link to this heading">#</a></h2>
<p>A couple weeks ago, we covered <a class="reference external" href="https://ncar.github.io/esds/posts/graphviz_example/">Creating Visualizations of Intake-ESM Catalogs</a> which is helpful for understanding how <a class="reference external" href="https://graphviz.readthedocs.io/en/stable/manual.html"><code class="docutils literal notranslate"><span class="pre">Graphviz</span></code></a> works!</p>
<section id="imports">
<h3>Imports<a class="headerlink" href="#imports" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">intake</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">graphviz</span><span class="w"> </span><span class="kn">import</span> <span class="n">Digraph</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="read-in-the-test-history-catalog">
<h3>Read in the Test History Catalog<a class="headerlink" href="#read-in-the-test-history-catalog" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col</span> <span class="o">=</span> <span class="n">intake</span><span class="o">.</span><span class="n">open_esm_datastore</span><span class="p">(</span><span class="s1">&#39;/glade/work/mgrover/cesm-hist-test.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We will assign the dataframe from the catalog to its own variable</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">df</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="visualize-the-catalog">
<h3>Visualize the Catalog<a class="headerlink" href="#visualize-the-catalog" title="Link to this heading">#</a></h3>
<p>Using the <code class="docutils literal notranslate"><span class="pre">Diagraph</span></code> object from the <a class="reference external" href="https://graphviz.readthedocs.io/en/stable/manual.html"><code class="docutils literal notranslate"><span class="pre">Graphviz</span></code> library</a>, we setup a loop to create the visualization using the three categories</p>
<ul class="simple">
<li><p>Case</p></li>
<li><p>Component</p></li>
<li><p>Frequency</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create Digraph object - use the left to right orientation instead of vertical</span>
<span class="n">dot</span> <span class="o">=</span> <span class="n">Digraph</span><span class="p">(</span><span class="n">graph_attr</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;rankdir&#39;</span><span class="p">:</span> <span class="s1">&#39;LR&#39;</span><span class="p">})</span>

<span class="c1"># Save the catalog as a pdf</span>
<span class="n">dot</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;pdf&#39;</span>

<span class="c1"># Start counting at one for node numbers</span>
<span class="n">num_node</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># Loop through the different cases</span>
<span class="k">for</span> <span class="n">case</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
    <span class="n">case_i</span> <span class="o">=</span> <span class="n">num_node</span>
    <span class="n">dot</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">case_i</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="n">case</span><span class="p">)</span>
    <span class="n">num_node</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># Loop through the different components in each case</span>
    <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">case</span> <span class="o">==</span> <span class="n">case</span><span class="p">]</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
        <span class="n">comp_i</span> <span class="o">=</span> <span class="n">num_node</span>
        <span class="n">dot</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">comp_i</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="n">component</span><span class="p">)</span>
        <span class="n">dot</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">case_i</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">comp_i</span><span class="p">))</span>
        <span class="n">num_node</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Loop through the frequency in each component within each experiment</span>
        <span class="k">for</span> <span class="n">frequency</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">df</span><span class="o">.</span><span class="n">case</span> <span class="o">==</span> <span class="n">case</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">component</span> <span class="o">==</span> <span class="n">component</span><span class="p">)]</span><span class="o">.</span><span class="n">frequency</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
            <span class="n">freq_i</span> <span class="o">=</span> <span class="n">num_node</span>

            <span class="c1"># Pull out the the stream information</span>
            <span class="n">stream</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">case</span> <span class="o">==</span> <span class="n">case</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">component</span> <span class="o">==</span> <span class="n">component</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">frequency</span> <span class="o">==</span> <span class="n">frequency</span><span class="p">)</span>
            <span class="p">]</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="c1"># Add both stream and frequency information to these bubbles</span>
            <span class="n">dot</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">freq_i</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;stream: </span><span class="si">{</span><span class="n">stream</span><span class="si">}</span><span class="s1"> </span><span class="se">\n</span><span class="s1"> frequency: </span><span class="si">{</span><span class="n">frequency</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">dot</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">comp_i</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">freq_i</span><span class="p">))</span>
            <span class="n">num_node</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">comp_i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">case_i</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<p>Now visualize it in inline by running a cell with just the <code class="docutils literal notranslate"><span class="pre">dot</span></code> object</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dot</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/0be4bbd0c5d5e7161727484e566351d39c92ddba78f9f336746f983c8aa1656e.svg" src="../../../_images/0be4bbd0c5d5e7161727484e566351d39c92ddba78f9f336746f983c8aa1656e.svg" />
</div>
</div>
</section>
<section id="save-the-visualization">
<h3>Save the Visualization<a class="headerlink" href="#save-the-visualization" title="Link to this heading">#</a></h3>
<p>In the block of code above, we specified <code class="docutils literal notranslate"><span class="pre">dot.format</span> <span class="pre">=</span> <span class="pre">'pdf'</span></code> which will ensure that when we save the graph, it is in PDF format. Other options include (but not limited to) <code class="docutils literal notranslate"><span class="pre">svg</span></code> and <code class="docutils literal notranslate"><span class="pre">png</span></code>!</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Diagraph</span></code> method for saving is <code class="docutils literal notranslate"><span class="pre">.render()</span></code> with the filename in the argument (within the parentheses)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dot</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s1">&#39;cesm_test_catalog&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;cesm_test_catalog.pdf&#39;
</pre></div>
</div>
</div>
</div>
<p>This saved a file within your directory called <code class="docutils literal notranslate"><span class="pre">cesm_test_catalog.pdf</span></code>! You can double click this within your file browser to take a look</p>
</section>
</section>
<section id="add-jupyterbook-files">
<h2>Add Jupyterbook files<a class="headerlink" href="#add-jupyterbook-files" title="Link to this heading">#</a></h2>
<p>If you are curious about <a class="reference external" href="https://jupyterbook.org/intro.html">Jupyterbook</a>, be sure to checkout their <a class="reference external" href="https://jupyterbook.org/intro.html">official documentation</a>, specifically their <a class="reference external" href="https://jupyterbook.org/start/your-first-book.html">building your first book</a> tutorial!</p>
<p>The main two files we need now are</p>
<ul class="simple">
<li><p>The table of contents (<code class="docutils literal notranslate"><span class="pre">_toc.yml</span></code>)</p></li>
<li><p>The config file (<code class="docutils literal notranslate"><span class="pre">_config.yml</span></code>)</p></li>
</ul>
<p>Go ahead and create text files with your docs directory using those identical filenames</p>
<section id="download-a-sample-cesm-logo">
<h3>Download a sample CESM logo<a class="headerlink" href="#download-a-sample-cesm-logo" title="Link to this heading">#</a></h3>
<p>I copied over a copy of the CESM logo to Github, which can be downloaded using the following (be sure to save to an an <code class="docutils literal notranslate"><span class="pre">image</span></code> directory in <code class="docutils literal notranslate"><span class="pre">docs</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget<span class="w"> </span>https://raw.githubusercontent.com/mgrover1/cesm-workflow/main/images/cesm.jpg
</pre></div>
</div>
</section>
<section id="adding-to-your-config-config-yml-file">
<h3>Adding to your Config (<code class="docutils literal notranslate"><span class="pre">_config.yml</span></code>) file<a class="headerlink" href="#adding-to-your-config-config-yml-file" title="Link to this heading">#</a></h3>
<p>Within your <code class="docutils literal notranslate"><span class="pre">_config.yml</span></code> file, input the following</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>title:<span class="w"> </span><span class="s2">&quot;CESM Test Data&quot;</span>
logo:<span class="w"> </span>images/cesm.jpg
execute:
<span class="w">  </span>execute_notebooks:<span class="w"> </span><span class="s2">&quot;off&quot;</span>
</pre></div>
</div>
</section>
<section id="add-to-your-table-of-contents-toc-yml-file">
<h3>Add to your Table of Contents (<code class="docutils literal notranslate"><span class="pre">_toc.yml</span></code>) file<a class="headerlink" href="#add-to-your-table-of-contents-toc-yml-file" title="Link to this heading">#</a></h3>
<p>This is where you place your content - in this case, the <code class="docutils literal notranslate"><span class="pre">model_documentation.ipynb</span></code> notebook. Jupyterbook does not require you specify the file type here - so leave off the <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-<span class="w"> </span>file:<span class="w"> </span>model_documentation
</pre></div>
</div>
</section>
</section>
<section id="build-your-book">
<h2>Build your Book!<a class="headerlink" href="#build-your-book" title="Link to this heading">#</a></h2>
<p>Now that you have your content, config file, and table of contents, it’s time to build the book. Make sure you are in your repository root directory, and run the following</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jupyter-book<span class="w"> </span>build<span class="w"> </span>docs
</pre></div>
</div>
<p>If it built correctly, you should see the following</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">===============================================================================</span>

<span class="n">Finished</span> <span class="n">generating</span> <span class="n">HTML</span> <span class="k">for</span> <span class="n">book</span><span class="o">.</span>
<span class="n">Your</span> <span class="n">book</span><span class="s1">&#39;s HTML pages are here:</span>
    <span class="n">docs</span><span class="o">/</span><span class="n">_build</span><span class="o">/</span><span class="n">html</span><span class="o">/</span>
<span class="n">You</span> <span class="n">can</span> <span class="n">look</span> <span class="n">at</span> <span class="n">your</span> <span class="n">book</span> <span class="n">by</span> <span class="n">opening</span> <span class="n">this</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">browser</span><span class="p">:</span>
    <span class="n">docs</span><span class="o">/</span><span class="n">_build</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="n">Or</span> <span class="n">paste</span> <span class="n">this</span> <span class="n">line</span> <span class="n">directly</span> <span class="n">into</span> <span class="n">your</span> <span class="n">browser</span> <span class="n">bar</span><span class="p">:</span>
    <span class="n">file</span><span class="p">:</span><span class="o">///</span><span class="n">glade</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">mgrover</span><span class="o">/</span><span class="n">git_repos</span><span class="o">/</span><span class="n">cesm</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="n">data</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">_build</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>            

<span class="o">===============================================================================</span>
</pre></div>
</div>
</section>
<section id="view-the-book-on-github">
<h2>View the Book on Github<a class="headerlink" href="#view-the-book-on-github" title="Link to this heading">#</a></h2>
<p>It can be difficult to view the book on the Jupyterhub, but fortunately we can use Github for publishing this online!</p>
<p>The <a class="reference external" href="https://jupyterbook.org/start/publish.html">Jupyterbook publish your book online</a> docs are helpful here, so we use the second part here <a class="reference external" href="https://jupyterbook.org/start/publish.html#publish-your-book-online-with-github-pages">describing using Github Pages</a></p>
<section id="install-github-pages-import">
<h3>Install Github Pages Import<a class="headerlink" href="#install-github-pages-import" title="Link to this heading">#</a></h3>
<p>If you have not done so already, install the following</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>ghp-import
</pre></div>
</div>
</section>
<section id="build-the-book-and-push-to-your-github-pages-branch">
<h3>Build the book and push to your Github Pages branch<a class="headerlink" href="#build-the-book-and-push-to-your-github-pages-branch" title="Link to this heading">#</a></h3>
<p>Move to your docs directory again, and run the following (after building your book)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ghp-import<span class="w"> </span>-n<span class="w"> </span>-p<span class="w"> </span>-f<span class="w"> </span>_build/html
</pre></div>
</div>
</section>
<section id="rebuilding-your-book">
<h3>Rebuilding your book<a class="headerlink" href="#rebuilding-your-book" title="Link to this heading">#</a></h3>
<p>If you make changes to your notebook or want to rebuild your book, run the following within your project root directory</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jupyter-book<span class="w"> </span>build<span class="w"> </span>docs
</pre></div>
</div>
<p>and this within your <code class="docutils literal notranslate"><span class="pre">docs</span></code> directory</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ghp-import<span class="w"> </span>-n<span class="w"> </span>-p<span class="w"> </span>-f<span class="w"> </span>_build/html
</pre></div>
</div>
</section>
</section>
<section id="go-checkout-your-book">
<h2>Go checkout your book!<a class="headerlink" href="#go-checkout-your-book" title="Link to this heading">#</a></h2>
<p>Your book will be published along the following url structure</p>
<p><code class="docutils literal notranslate"><span class="pre">{github_username}.github.io/{repository_name}</span></code></p>
<p>For this example, the book can be found here</p>
<p><a class="reference external" href="https://mgrover1.github.io/cesm-test-data/"><strong>https://mgrover1.github.io/cesm-test-data/</strong></a></p>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">#</a></h2>
<p>This was a fairly in-depth post which covered content from previous <a class="reference external" href="https://ncar.github.io/esds/blog/">ESDS blog posts</a>, but I hope this provides a starting point for documentation your data, visualizing the data available, and sharing your data documentation with others!</p>
</section>
</section>

<div class="section ablog__blog_comments">
  
  


<div class="section ablog__prev-next">
  <span class="ablog__prev">
    
    
    <a href="../cesm-workshop-2021-diagnostics/">
      
      <i class="fa fa-arrow-circle-left"></i>
      
      <span>CESM Diagnostics Discussion</span>
    </a>
    
  </span>
  <span class="ablog__spacer">&nbsp;</span>
  <span class="ablog__next">
    
    
    <a href="../scaling-with-dask-class-takeaways/">
      <span>Scaling Python with Dask Class Takeaways</span>
      
      <i class="fa fa-arrow-circle-right" ></i>
      
    </a>
    
  </span>
</div>

  
  
</div>

                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fair-warning">Fair Warning</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-your-github-repository">Create your Github Repository</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clone-your-repository">Clone your Repository</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#copy-the-link-from-github">Copy the link from Github</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clone-to-your-machine">Clone to your machine!</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-docs-directory">Create a docs directory</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-your-catalog">Build your Catalog</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#read-the-catalog-and-visualize-the-components-and-frequency">Read the Catalog and Visualize the Components and Frequency</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#imports">Imports</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#read-in-the-test-history-catalog">Read in the Test History Catalog</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualize-the-catalog">Visualize the Catalog</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#save-the-visualization">Save the Visualization</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-jupyterbook-files">Add Jupyterbook files</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#download-a-sample-cesm-logo">Download a sample CESM logo</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-to-your-config-config-yml-file">Adding to your Config (<code class="docutils literal notranslate"><span class="pre">_config.yml</span></code>) file</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-to-your-table-of-contents-toc-yml-file">Add to your Table of Contents (<code class="docutils literal notranslate"><span class="pre">_toc.yml</span></code>) file</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-your-book">Build your Book!</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#view-the-book-on-github">View the Book on Github</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-github-pages-import">Install Github Pages Import</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-the-book-and-push-to-your-github-pages-branch">Build the book and push to your Github Pages branch</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rebuilding-your-book">Rebuilding your book</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#go-checkout-your-book">Go checkout your book!</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/posts/2021/model_documentation_jupyterbook.ipynb.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>