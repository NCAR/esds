
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Templating isn’t just for Web Developers! &#8212; ESDS 0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=66307ba7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../_static/documentation_options.js?v=19645805"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=30646c52"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'posts/2020/templating-isnt-just-for-web-developers';</script>
    <link rel="author" title="About these documents" href="../../../about/" />
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />

<link
  rel="alternate"
  type="application/atom+xml"
  href="../../../blog/atom.xml"
  title="ESDS"
/>



  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search/"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../">
  
  
  
  
  
  
    <p class="title logo__title">ESDS 0.1 documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../about/">
    About Us
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../accessibility/">
    Accessibility
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../faq/">
    Frequently Asked Questions
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../blog/">
    Blog
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../communication/">
    Communication, Meetings, and Resources
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../../office-hours/">
    Office Hours
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../../best-practices/">
    Best Practices
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../../projects/">
    Projects
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ncar/esds" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../about/">
    About Us
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../accessibility/">
    Accessibility
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../faq/">
    Frequently Asked Questions
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../blog/">
    Blog
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../communication/">
    Communication, Meetings, and Resources
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../office-hours/">
    Office Hours
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../best-practices/">
    Best Practices
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../projects/">
    Projects
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ncar/esds" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

<div class="ablog-sidebar-item ablog__postcard">


<h2>
  
  
  <i class="fa fa-calendar"></i>
  
  <span>08 May 2020</span>
  
</h2>
<ul>
  <div class="ablog-sidebar-item ablog__postcard2">


<li id="ablog-sidebar-item author ablog__author">
  <span>
    
    <i class="fa-fw fa fa-user"></i>
    
    </span>
  
  
  <a href="../../../blog/author/kevin-paul/">Kevin Paul</a>
  
  
  
</li>





<li id="ablog-sidebar-item tags ablog__tags">
  <span>
    
    
    <i class="fa-fw fa fa-tags"></i>
    
    
    </span>
  
  
  <a href="../../../blog/tag/templating/">templating</a>
  
  
  
  
  
  <a href="../../../blog/tag/jinja2/">jinja2</a>
  
  
  
</li>


</div>
</ul>
</div>
</div>
        <div class="sidebar-primary-item">

<div class="ablog-sidebar-item ablog__recentposts">
<h3>
  <a href="../../../blog/">Recent Posts</a>
</h3>
<ul>
  
  
  <li>
    <a href="../../2024/automation-github-workshop/">
      28 June - Workshop - From Jupyter Notebook to Web Server: Automating Container Deployments with GitHub Actions
    </a>
  </li>
  
  <li>
    <a href="../../2024/containerize-visualizations-event/">
      07 May - Workshop - From Jupyter Notebook to Web Server: Containerizing Interactive Visualizations
    </a>
  </li>
  
  <li>
    <a href="../../2024/esds-annual-event-recap/">
      01 March - 2024 ESDS Annual Event Recap
    </a>
  </li>
  
  <li>
    <a href="../../2023/esds-annual-event/">
      21 November - 2024 Earth System Data Science (ESDS) Annual Event
    </a>
  </li>
  
  <li>
    <a href="../../2023/scipy23/">
      28 August - ESDS at SciPy 2023
    </a>
  </li>
  
</ul>
</div>
</div>
        <div class="sidebar-primary-item">

<div class="ablog-sidebar-item ablog__archive">
<h3>
  <a href="../../../blog/archive/">Archives</a>
</h3>
<ul>
  
  
  <li>
    <a href="../../../blog/2024/">2024 (3)</a>
  </li>
  
  
  
  <li>
    <a href="../../../blog/2023/">2023 (8)</a>
  </li>
  
  
  
  <li>
    <a href="../../../blog/2022/">2022 (13)</a>
  </li>
  
  
  
  <li>
    <a href="../../../blog/2021/">2021 (52)</a>
  </li>
  
  
  
  <li>
    <a href="../../../blog/2020/">2020 (6)</a>
  </li>
  
  
  
  <li>
    <a href="../../../blog/2019/">2019 (2)</a>
  </li>
  
  
</ul>
</div>
</div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Templating isn’t just for Web Developers!</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
<section class="tex2jax_ignore mathjax_ignore" id="templating-isn-t-just-for-web-developers">
<h1>Templating isn’t just for Web Developers!<a class="headerlink" href="#templating-isn-t-just-for-web-developers" title="Link to this heading">#</a></h1>
<p>Recently, I found myself rambling on in an unprepared attempt to
explain templating to a colleague of mine who had no prior experience
with frontend design. It didn’t take me long to realize that my
explanation was convoluted and confusing, not that I stopped talking,
mind you. Attribute that to being unprepared, or sleep deprived (i.e.,
child <em>still</em> not sleeping through the night!), or just a bad teacher.</p>
<p>Regardless, I decided to point them to a tutorial online that
<em>certainly must exist</em>, but after a brief Google search (which you
should read as, “I didn’t find anything in the first page of search
results!”), all I could find were tutorials for frontend developers.
And if you aren’t an HTML expert, or already have experience with
Flask or Django, teaching templating in those contexts can actually
be more confusing than illuminating.</p>
<p>So, as I always do when I find myself struggling with something that
I think should be easy, I ask my wife for advise. I tried to explain
the concept of templating to my wife, who is not a software developer
<em>at all</em>. My wife looked at me with this look that said, “What’s not
to get?” Then she said, “You mean filling out a form letter
automatically…”</p>
<p>Yes. Exactly. And while my palm was hitting my forehead, it occurred
to me that I should write a templating tutorial for those who really
don’t have any prior experience with frontend development and who
might even be scared when they read “less-than-h-t-m-l-greater-than”.
Today, we’ll learn Jinja2 templating through an example use case where
we want to generate a form letter for a number of different addressees.</p>
<section id="jinja2">
<h2>Jinja2<a class="headerlink" href="#jinja2" title="Link to this heading">#</a></h2>
<p>I’ll be using Jinja2 for this tutorial. It’s extremely popular and
widespread in the Python developer community, and it has very good
documentation… except for the fact that all of their documentation
is almost entirely geared toward frontend designers.</p>
<p>You can install Jinja2 with <code class="docutils literal notranslate"><span class="pre">pip</span></code> or <code class="docutils literal notranslate"><span class="pre">conda</span></code> as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>Jinja2
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conda<span class="w"> </span>install<span class="w"> </span>jinja2
</pre></div>
</div>
<p>That’s it. You should now be set up with an environment that
has (at least) python3 and jinja2 installed in it.</p>
</section>
<section id="the-use-case">
<h2>The Use Case<a class="headerlink" href="#the-use-case" title="Link to this heading">#</a></h2>
<p>Imagine that you are the attorney for an oil tycoon with $4.5M
held in the Bank of <a class="reference external" href="https://en.wikipedia.org/wiki/Duck_Soup_(1933_film)">Freedonia</a>.
With tensions mounting between Freedonia and neighboring Sylvania,
and war looming on the horizon, your client has authorized you to
move these assets to another bank outside of Freedonia. Clearly,
your only course of action is to email as many people for whom
you can find addresses to ask them if they would be willing to
hold the assets in their account for the duration of the conflict.
Obviously, you will need to pay them for their kind services, and
the oil tycoon has agreed to authorize you to gift 20% of the assets
to whomever holds them, as payment for their kindness. You just
need some personal information from them and some bank routine
information. That’s all. You have obtained your list of addressees
from a kind person working for the humanitarian WikiLeaks “Foundation,”
and now you must craft an email to send to all of these addressees.</p>
<p>So, there is your entirely believable, totally serious, and extremely
common scenario motivating your need to learn templating.</p>
</section>
<section id="the-letter">
<h2>The Letter<a class="headerlink" href="#the-letter" title="Link to this heading">#</a></h2>
<p>Fortunately, you already have a “template” for a formal <em>written</em> business
letter sitting around on your hard drive. It looks like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[Your Address]

[Date]

[Recipient Name]
[Recipient Title]
[Recipient Company]
[Recipient Address]

[Greeting] [Recipient Name]:

[Letter Body]

[Closing],

[Your Name]
[Your Title]
</pre></div>
</div>
<p>Each element in this “template” that is enclosed in <code class="docutils literal notranslate"><span class="pre">[]</span></code>-brackets is
just a placeholder for some other text. Some of that text is short,
like names, titles, or greeting or closing text. Some of that text
will me multi-line input, such as the letter’s body and the addresses.
In Python, all you would want to do is something like string
substitution, for example replacing <code class="docutils literal notranslate"><span class="pre">[Your</span> <span class="pre">Name]</span></code> with <code class="docutils literal notranslate"><span class="pre">Jane</span> <span class="pre">Smith</span></code>.</p>
<p>This is exactly what “templating” is all about. It is, essentially,
just string substitution…but with a touch more sophistication.</p>
</section>
<section id="the-jinja2-template">
<h2>The Jinja2 Template<a class="headerlink" href="#the-jinja2-template" title="Link to this heading">#</a></h2>
<p>So, to start out, we are going to convert this text template into a
Jinja2 template. To do so, the easiest first step would be to just
replace every <code class="docutils literal notranslate"><span class="pre">[]</span></code>-bracketted item with a Jinja2 <em>expressions</em>,
which are represented with <code class="docutils literal notranslate"><span class="pre">{{}}</span></code>-brackets:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">your_address</span> <span class="cp">}}</span>

<span class="cp">{{</span> <span class="nv">date</span> <span class="cp">}}</span>

<span class="cp">{{</span> <span class="nv">recipient_name</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">recipient_title</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">recipient_company</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">recipient_address</span> <span class="cp">}}</span>

<span class="cp">{{</span> <span class="nv">greeting</span> <span class="cp">}}</span><span class="x"> </span><span class="cp">{{</span> <span class="nv">recipient_name</span> <span class="cp">}}</span><span class="x">:</span>

<span class="cp">{{</span> <span class="nv">letter_body</span> <span class="cp">}}</span>

<span class="cp">{{</span> <span class="nv">closing</span> <span class="cp">}}</span><span class="x">,</span>

<span class="cp">{{</span> <span class="nv">your_name</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">your_title</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>Also, notice that I have converted the text labels inside the
<code class="docutils literal notranslate"><span class="pre">[]</span></code>-brackets into valid Python variable names. Let’s assume
that this new <em>template file</em> is called <code class="docutils literal notranslate"><span class="pre">letter.j2</span></code> (where
the <code class="docutils literal notranslate"><span class="pre">.j2</span></code> means it is a Jinja2 template, but Jinja2 does not
care what extension the file actually has).</p>
<p>We can now “write” this letter using Python variables from a
Python script. First, let’s start writing a Python script that
can “render” this Jinja2 template:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">jinja2</span><span class="w"> </span><span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">FileSystemLoader</span>

<span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">loader</span><span class="o">=</span><span class="n">FileSystemLoader</span><span class="p">(</span><span class="s1">&#39;./&#39;</span><span class="p">))</span>
<span class="n">template</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s1">&#39;letter.j2&#39;</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>

<span class="nb">print</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">))</span>
</pre></div>
</div>
<p>If you were to run this script as it current exists, you would
get a lot of blank lines, and some “floating” punctuation.
Something like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> :



,
</pre></div>
</div>
<p>This is because the <code class="docutils literal notranslate"><span class="pre">data</span></code> variable is empty. In other words,
all of those <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">var_name</span> <span class="pre">}}</span></code> template variables <em>never got defined!</em>
Jinja2 assumes that anything that isn’t defined is an empty string.</p>
<p>So, if we were to fill in the <code class="docutils literal notranslate"><span class="pre">data</span></code> dictionary with some data
with keys matching the template variables, we should see something
different.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;your_name&#39;</span><span class="p">:</span> <span class="s2">&quot;Jane Smith&quot;</span><span class="p">,</span>
    <span class="s1">&#39;your_title&#39;</span><span class="p">:</span> <span class="s2">&quot;Attorney at Law&quot;</span><span class="p">,</span>
    <span class="s1">&#39;your_address&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;1234 Somewhere Street</span>
<span class="s2">Atown, XY  12345&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y %B </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">),</span>
    <span class="s1">&#39;recipient_name&#39;</span><span class="p">:</span> <span class="s2">&quot;Joe Smith&quot;</span><span class="p">,</span>
    <span class="s1">&#39;recipient_title&#39;</span><span class="p">:</span> <span class="s2">&quot;Head of Marketing&quot;</span><span class="p">,</span>
    <span class="s1">&#39;recipient_company&#39;</span><span class="p">:</span> <span class="s2">&quot;Better Stuff, Inc.&quot;</span><span class="p">,</span>
    <span class="s1">&#39;recipient_address&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;5678 Nowhere Drive</span>
<span class="s2">Someberg, YZ  56789&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;greeting&#39;</span><span class="p">:</span> <span class="s1">&#39;Dear&#39;</span><span class="p">,</span>
    <span class="s1">&#39;closing&#39;</span><span class="p">:</span> <span class="s1">&#39;Sincerely&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And with that change, the output should now look like:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>1234 Somewhere Street
Atown, XY  12345

2020 May 11

Joe Smith
Head of Marketing
Better Stuff, Inc.
5678 Nowhere Drive
Someberg, YZ  56789

Dear Joe Smith:



Sincerely,

Jane Smith
Attorney at Law
</pre></div>
</div>
<p>Does it make sense? Let’s explain what’s going on here.</p>
<p>In our Python code, we are creating some data (literally <code class="docutils literal notranslate"><span class="pre">data</span></code>)
that we want to hand off to the “template engine” to insert into
the template, itself. The template engine (<code class="docutils literal notranslate"><span class="pre">jinja2</span></code>) searches
through the template document for all occurrences of <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">key</span> <span class="pre">}}</span></code>
for each <code class="docutils literal notranslate"><span class="pre">key</span></code> in the <code class="docutils literal notranslate"><span class="pre">data</span></code> dictionary (or each keyward argument
in the <code class="docutils literal notranslate"><span class="pre">render()</span></code> function). And it does simple substition of
the string <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">key</span> <span class="pre">}}</span></code> with <code class="docutils literal notranslate"><span class="pre">data[key]</span></code>. Any <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">key</span> <span class="pre">}}</span></code>
not found in the <code class="docutils literal notranslate"><span class="pre">data</span></code> dictionary will be replaced with an
empty string, and any <code class="docutils literal notranslate"><span class="pre">key</span></code> in the <code class="docutils literal notranslate"><span class="pre">data</span></code> dictionary <em>not</em> found
in the template document will be ignored.</p>
<p>That’s it. That’s a <em>lot</em> of what templating is all about.</p>
<p>But not everything.</p>
</section>
<section id="jinja2-statements">
<h2>Jinja2 Statements<a class="headerlink" href="#jinja2-statements" title="Link to this heading">#</a></h2>
<p>This letter template is nice, but we want to send out <em>emails</em>,
not actual postage. You don’t have time for snail mail!</p>
<p>So, we <em>could</em> write another template for an email, but for the
sake of edification, let’s just modify our existing template
to be <em>dual purpose</em>. In particular, some of the template
variables are just not used when writing emails (<code class="docutils literal notranslate"><span class="pre">your_address</span></code>,
<code class="docutils literal notranslate"><span class="pre">date</span></code>, <code class="docutils literal notranslate"><span class="pre">recipient_name</span></code>, <code class="docutils literal notranslate"><span class="pre">recipient_title</span></code>, <code class="docutils literal notranslate"><span class="pre">recipient_company</span></code>,
<code class="docutils literal notranslate"><span class="pre">recipient_address</span></code>). But if we leave these variables undeclared,
then there will be odd whitespace at the top of our email. So,
we will add another template variable for the sole purpose of
specifying if the document we are writing is a letter or an
email. We’ll label this variable <code class="docutils literal notranslate"><span class="pre">is_letter</span></code>, and we’ll
insert it into our template document with some <code class="docutils literal notranslate"><span class="pre">if</span></code> <em>statements</em>,
like so:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">is_letter</span> <span class="cp">%}</span>
<span class="cp">{{</span> <span class="nv">your_address</span> <span class="cp">}}</span>

<span class="cp">{{</span> <span class="nv">date</span> <span class="cp">}}</span>

<span class="cp">{{</span> <span class="nv">recipient_name</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">recipient_title</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">recipient_company</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">recipient_address</span> <span class="cp">}}</span>

<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{{</span> <span class="nv">greeting</span> <span class="cp">}}</span><span class="x"> </span><span class="cp">{{</span> <span class="nv">recipient_name</span> <span class="cp">}}</span><span class="x">:</span>

<span class="cp">{{</span> <span class="nv">letter_body</span> <span class="cp">}}</span>

<span class="cp">{{</span> <span class="nv">closing</span> <span class="cp">}}</span><span class="x">,</span>

<span class="cp">{{</span> <span class="nv">your_name</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">your_title</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>By default, if we don’t specify <code class="docutils literal notranslate"><span class="pre">is_letter</span></code> in the
<code class="docutils literal notranslate"><span class="pre">data</span></code> variable in our Python script, it will default
to an empty string. And in Python, that evaluates
to <code class="docutils literal notranslate"><span class="pre">False</span></code> in a boolean check. So, the top part
of our template will not be displayed if <code class="docutils literal notranslate"><span class="pre">is_letter</span></code>
is <code class="docutils literal notranslate"><span class="pre">False</span></code> or unset. That is, you must explicitly
<em>set</em> <code class="docutils literal notranslate"><span class="pre">is_letter</span></code> or it will assume it is an email.</p>
<p>There are a lot more kinds of <em>statements</em> (<code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">%}</span></code>-syntax)
you can place in your templates, but this is just a
simple example of what you can do.</p>
<p>Note also that these template variables are all native
Python data types, which means you can declare a template
variable to be a <code class="docutils literal notranslate"><span class="pre">list</span></code>, for example, and index into that
list in the template itself.</p>
</section>
<section id="inheritance">
<h2>Inheritance<a class="headerlink" href="#inheritance" title="Link to this heading">#</a></h2>
<p>The last thing to explain that is useful with templating
is <em>inheritance</em>. If we wanted to print out the same
letter for every recipient, we <em>could</em> just as easily
write the <code class="docutils literal notranslate"><span class="pre">letter_body</span></code> in the Python script, itself.
However, since the <code class="docutils literal notranslate"><span class="pre">letter_body</span></code> could be quite long,
we will put it in <em>another</em> template file. One that
inherits from the original.</p>
<p>To do this, we will first change the <code class="docutils literal notranslate"><span class="pre">letter_body</span></code> from
a template <em>variable</em> to a template <em>block</em> in our
<code class="docutils literal notranslate"><span class="pre">letter.j2</span></code> template file, like so:</p>
<div class="highlight-jinja2 notranslate"><div class="highlight"><pre><span></span>{% if is_letter %}
{{ your_address }}

{{ date }}

{{ recipient_name }}
{{ recipient_title }}
{{ recipient_company }}
{{ recipient_address }}

{% endif %}
{{ greeting }} {{ recipient_name }}:

{% block letter_body %}
{% endblock %}

{{ closing }},

{{ your_name }}
{{ your_title }}
</pre></div>
</div>
<p>And then we will write a second template file
(called, for example, <code class="docutils literal notranslate"><span class="pre">scam.j2</span></code>), that looks like this:</p>
<div class="highlight-jinja2 notranslate"><div class="highlight"><pre><span></span>{% extends &quot;letter.j2&quot; %}

{% block letter_body %}
(...contents of my letter...)
{% endblock %}
</pre></div>
</div>
<p>Now, change our script to render the <code class="docutils literal notranslate"><span class="pre">scam.j2</span></code>
template instead of the <code class="docutils literal notranslate"><span class="pre">letter.j2</span></code> template and
see what it outputs. You should get something like
this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Dear Joe Smith:


...contents of my letter...


Sincerely,

Jane Smith
Attorney at Law
</pre></div>
</div>
<p>and if you want to remove those extraneous blank
lines, you might want to set <code class="docutils literal notranslate"><span class="pre">trim_blocks=True</span></code> in
the <code class="docutils literal notranslate"><span class="pre">Environment</span></code> declaration. Then, you should
see something like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Dear Joe Smith:

...contents of my letter...

Sincerely,

Jane Smith
Attorney at Law
</pre></div>
</div>
<p>And that’s it! Now, you are an expert in templating
with Jinja2! Feel free to attempt your own Spanish
Prisoner con. (<strong><em>Not advised!</em></strong>)</p>
<p>Well, maybe not an <em>expert</em>. There’s a lot I didn’t
talk about that you can read about in the Jinja2
<a class="reference external" href="https://jinja.palletsprojects.com/">documentation</a>.
Hopefully, though, you can see how something like this
can be <em>extremely useful</em> when generating HTML pages
for a website.</p>
</section>
</section>

<div class="section ablog__blog_comments">
  
  


<div class="section ablog__prev-next">
  <span class="ablog__prev">
    
    
    <a href="../../2019/we-are-xdev/">
      
      <i class="fa fa-arrow-circle-left"></i>
      
      <span>We are Xdev!</span>
    </a>
    
  </span>
  <span class="ablog__spacer">&nbsp;</span>
  <span class="ablog__next">
    
    
    <a href="../writing-multiple-netcdf-files-in-parallel-with-xarray-and-dask/">
      <span>Writing multiple netCDF files in parallel with xarray and dask</span>
      
      <i class="fa fa-arrow-circle-right" ></i>
      
    </a>
    
  </span>
</div>

  
  
</div>

                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#jinja2">Jinja2</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-use-case">The Use Case</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-letter">The Letter</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-jinja2-template">The Jinja2 Template</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#jinja2-statements">Jinja2 Statements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inheritance">Inheritance</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/posts/2020/templating-isnt-just-for-web-developers.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, Earth System Data Science (ESDS) Team.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>